<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trajanus Command Center</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --teal-dark: #1a365d;
            --teal-mid: #2c5282;
            --teal-light: #3182ce;
            --cream: #FFFEF0;
            --green-dark: #1e5c3a;
            --green-mid: #2d7a4f;
            --green-light: #3a9963;
            --gray-dark: #2d3748;
            --gray-mid: #4a5568;
            --gray-light: #a0aec0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--teal-mid) 0%, var(--teal-dark) 100%);
            min-height: 100vh;
            display: flex;
            color: #fff;
        }
        
        /* SIDEBAR - Project Navigation */
        .sidebar {
            width: 260px;
            background: rgba(0,0,0,0.3);
            padding: 20px;
            display: flex;
            flex-direction: column;
            border-right: 1px solid rgba(255,255,255,0.1);
        }
        
        .sidebar-header {
            text-align: center;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.2);
            margin-bottom: 20px;
        }
        
        .sidebar-header h1 {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--cream);
        }
        
        .sidebar-header .subtitle {
            font-size: 0.75rem;
            color: var(--gray-light);
            margin-top: 5px;
        }
        
        .project-section {
            margin-bottom: 25px;
        }
        
        .project-section h3 {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--gray-light);
            margin-bottom: 10px;
            padding-left: 10px;
        }
        
        .project-btn {
            width: 100%;
            padding: 12px 15px;
            background: transparent;
            border: none;
            border-radius: 8px;
            color: #fff;
            text-align: left;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
            margin-bottom: 5px;
        }
        
        .project-btn:hover {
            background: rgba(255,255,255,0.1);
        }
        
        .project-btn.active {
            background: rgba(255,255,255,0.15);
            border-left: 3px solid var(--green-light);
        }
        
        .project-btn .icon {
            margin-right: 10px;
        }
        
        /* MAIN CONTENT */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        /* HEADER */
        .header {
            background: var(--cream);
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header-title h2 {
            color: var(--teal-mid);
            font-size: 1.5rem;
        }
        
        .header-title .breadcrumb {
            color: var(--gray-mid);
            font-size: 0.85rem;
            margin-top: 3px;
        }
        
        .clock {
            background: var(--teal-light);
            color: #fff;
            padding: 10px 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-weight: bold;
        }
        
        /* WORKSPACE */
        .workspace {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
        }
        
        /* SESSION BUTTONS */
        .session-tools {
            background: rgba(0,0,0,0.2);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
        }
        
        .session-tools h3 {
            color: var(--cream);
            margin-bottom: 15px;
            font-size: 1.1rem;
        }
        
        .button-grid {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .session-btn {
            padding: 18px 30px;
            background: linear-gradient(145deg, var(--green-mid), var(--green-dark));
            color: #e0f0e8;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            transition: all 0.2s ease;
            box-shadow: 
                0 4px 15px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            position: relative;
        }
        
        .session-btn:hover {
            background: linear-gradient(145deg, var(--green-light), var(--green-mid));
            transform: translateY(-2px);
            box-shadow: 
                0 6px 20px rgba(0, 0, 0, 0.4),
                0 0 15px rgba(60, 180, 100, 0.3);
        }
        
        .session-btn:active {
            transform: translateY(1px);
        }
        
        /* Tooltip */
        .session-btn::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 110%;
            left: 50%;
            transform: translateX(-50%);
            background: #555;
            color: #fff;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 400;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s;
            z-index: 100;
        }
        
        .session-btn:hover::after {
            opacity: 1;
            visibility: visible;
        }
        
        /* TERMINAL OUTPUT */
        .terminal {
            background: #1e1e1e;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 20px;
        }
        
        .terminal-header {
            background: #323232;
            padding: 10px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .terminal-header span {
            color: #aaa;
            font-size: 0.85rem;
        }
        
        .terminal-clear {
            background: transparent;
            border: 1px solid #555;
            color: #aaa;
            padding: 4px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.75rem;
        }
        
        .terminal-clear:hover {
            background: #444;
        }
        
        .terminal-body {
            padding: 15px;
            height: 300px;
            overflow-y: auto;
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 0.85rem;
            color: #0f0;
        }
        
        .terminal-body .error {
            color: #f44;
        }
        
        .terminal-body .info {
            color: #4af;
        }
        
        .terminal-body .success {
            color: #4f4;
        }
        
        /* STATUS BAR */
        .status-bar {
            background: rgba(0,0,0,0.4);
            padding: 8px 20px;
            display: flex;
            justify-content: space-between;
            font-size: 0.75rem;
            color: var(--gray-light);
        }
        
        .status-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--green-light);
        }
        
        .status-dot.warning {
            background: #f0ad4e;
        }
        
        .status-dot.error {
            background: #d9534f;
        }
    </style>
</head>
<body>
    <!-- SIDEBAR -->
    <div class="sidebar">
        <div class="sidebar-header">
            <h1>TRAJANUS USA</h1>
            <div class="subtitle">Command Center v1.0</div>
        </div>
        
        <div class="project-section">
            <h3>Developer Projects</h3>
            <button class="project-btn active" data-project="command-center">
                <span class="icon">‚ö°</span> Command Center
            </button>
            <button class="project-btn" data-project="website">
                <span class="icon">üåê</span> Website Builder
            </button>
            <button class="project-btn" data-project="pm-toolkit">
                <span class="icon">üìä</span> PM Toolkit
            </button>
            <button class="project-btn" data-project="qcm-toolkit">
                <span class="icon">‚úì</span> QCM Toolkit
            </button>
            <button class="project-btn" data-project="safety-toolkit">
                <span class="icon">‚ö†</span> Safety Toolkit
            </button>
            <button class="project-btn" data-project="route-optimizer">
                <span class="icon">üöõ</span> Route Optimizer
            </button>
            <button class="project-btn" data-project="memory">
                <span class="icon">üß†</span> Memory/Resources
            </button>
        </div>
        
        <div class="project-section">
            <h3>Working Projects</h3>
            <button class="project-btn" data-project="traffic-study">
                <span class="icon">üö¶</span> Traffic Study (Tom)
            </button>
            <button class="project-btn" data-project="pm-working">
                <span class="icon">üíº</span> PM Working
            </button>
            <button class="project-btn" data-project="qcm-working">
                <span class="icon">üìã</span> QCM Working
            </button>
        </div>
        
        <div style="margin-top: auto; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1);">
            <button class="project-btn" onclick="openClaude()">
                <span class="icon">ü§ñ</span> Claude AI
            </button>
            <button class="project-btn" onclick="openDrive()">
                <span class="icon">üìÅ</span> Google Drive
            </button>
        </div>
    </div>
    
    <!-- MAIN CONTENT -->
    <div class="main-content">
        <div class="header">
            <div class="header-title">
                <h2 id="projectTitle">Command Center</h2>
                <div class="breadcrumb" id="breadcrumb">Developer Projects ‚Üí Command Center</div>
            </div>
            <div class="clock" id="clock">Loading...</div>
        </div>
        
        <div class="workspace">
            <!-- Session Management Tools -->
            <div class="session-tools">
                <h3>Session Management</h3>
                <div class="button-grid">
                    <button class="session-btn" data-tooltip="Upload .md files, convert to Docs, append to MASTERs" onclick="runUpdateLivingDocs()">
                        Update Living Documents
                    </button>
                    <button class="session-btn" data-tooltip="Select .md files to convert to Google Docs" onclick="runConvertMD()">
                        Convert MD to Docs
                    </button>
                    <button class="session-btn" data-tooltip="Select .md files to convert to Word .docx" onclick="runConvertDOCX()">
                        Convert MD to Word
                    </button>
                    <button class="session-btn" data-tooltip="ONE-TIME: Create all 10 MASTER documents" onclick="runSetupDocs()">
                        Setup Living Documents
                    </button>
                    <button class="session-btn" data-tooltip="Batch convert folder contents to Google Docs" onclick="runBatchConvert()">
                        Batch Convert Folder
                    </button>
                </div>
            </div>
            
            <!-- Terminal Output -->
            <div class="terminal">
                <div class="terminal-header">
                    <span>Terminal Output</span>
                    <button class="terminal-clear" onclick="clearTerminal()">Clear</button>
                </div>
                <div class="terminal-body" id="terminal">
                    <div class="info">[Ready] Trajanus Command Center initialized</div>
                    <div class="info">[Ready] Waiting for commands...</div>
                </div>
            </div>
        </div>
        
        <!-- Status Bar -->
        <div class="status-bar">
            <div class="status-item">
                <span class="status-dot"></span>
                <span>Connected to Google Drive</span>
            </div>
            <div class="status-item">
                <span id="platform">Platform: Loading...</span>
            </div>
            <div class="status-item">
                <span id="version">v1.0.0</span>
            </div>
        </div>
    </div>
    
    <script>
        // ============================================
        // CLOCK
        // ============================================
        function updateClock() {
            const now = new Date();
            const options = { 
                day: '2-digit',
                month: 'short', 
                year: 'numeric',
                hour: '2-digit', 
                minute: '2-digit',
                second: '2-digit',
                hour12: false 
            };
            document.getElementById('clock').textContent = now.toLocaleString('en-US', options);
        }
        setInterval(updateClock, 1000);
        updateClock();
        
        // ============================================
        // TERMINAL
        // ============================================
        function log(message, type = 'default') {
            const terminal = document.getElementById('terminal');
            const line = document.createElement('div');
            line.className = type;
            const timestamp = new Date().toLocaleTimeString('en-US', { hour12: false });
            line.textContent = `[${timestamp}] ${message}`;
            terminal.appendChild(line);
            terminal.scrollTop = terminal.scrollHeight;
        }
        
        function clearTerminal() {
            document.getElementById('terminal').innerHTML = '<div class="info">[Cleared] Terminal cleared</div>';
        }
        
        // Listen for script output
        window.electronAPI.onScriptOutput((data) => {
            const lines = data.split('\n');
            lines.forEach(line => {
                if (line.trim()) {
                    if (line.includes('ERROR') || line.includes('‚ùå')) {
                        log(line, 'error');
                    } else if (line.includes('‚úì') || line.includes('SUCCESS')) {
                        log(line, 'success');
                    } else {
                        log(line, 'info');
                    }
                }
            });
        });
        
        // ============================================
        // PROJECT NAVIGATION
        // ============================================
        document.querySelectorAll('.project-btn[data-project]').forEach(btn => {
            btn.addEventListener('click', () => {
                // Update active state
                document.querySelectorAll('.project-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                // Update header
                const name = btn.textContent.trim();
                document.getElementById('projectTitle').textContent = name;
                
                const section = btn.closest('.project-section').querySelector('h3').textContent;
                document.getElementById('breadcrumb').textContent = `${section} ‚Üí ${name}`;
                
                log(`Switched to project: ${name}`, 'info');
            });
        });
        
        // ============================================
        // SESSION MANAGEMENT FUNCTIONS
        // ============================================
        async function runUpdateLivingDocs() {
            log('Starting: Update Living Documents...', 'info');
            try {
                const result = await window.electronAPI.runPythonScript('update_living_documents_v3.py');
                if (result.success) {
                    log('‚úì Living documents updated successfully', 'success');
                } else {
                    log(`Script exited with code ${result.code}`, 'error');
                }
            } catch (err) {
                log(`Error: ${err.message}`, 'error');
            }
        }
        
        async function runConvertMD() {
            log('Opening file picker...', 'info');
            const files = await window.electronAPI.selectFiles({
                filters: [{ name: 'Markdown', extensions: ['md'] }]
            });
            if (files.length > 0) {
                log(`Selected ${files.length} file(s)`, 'info');
                try {
                    const result = await window.electronAPI.runPythonScript('convert_md_to_gdocs.py', files);
                    if (result.success) {
                        log('‚úì Conversion complete', 'success');
                    }
                } catch (err) {
                    log(`Error: ${err.message}`, 'error');
                }
            } else {
                log('No files selected', 'info');
            }
        }
        
        async function runConvertDOCX() {
            log('Opening file picker...', 'info');
            const files = await window.electronAPI.selectFiles({
                filters: [{ name: 'Markdown', extensions: ['md'] }]
            });
            if (files.length > 0) {
                log(`Selected ${files.length} file(s)`, 'info');
                try {
                    const result = await window.electronAPI.runPythonScript('convert_md_to_docx.py', files);
                    if (result.success) {
                        log('‚úì Conversion complete', 'success');
                    }
                } catch (err) {
                    log(`Error: ${err.message}`, 'error');
                }
            }
        }
        
        async function runSetupDocs() {
            log('Starting: Setup Living Documents (one-time)...', 'info');
            try {
                const result = await window.electronAPI.runPythonScript('setup_living_documents.py');
                if (result.success) {
                    log('‚úì All 10 MASTER documents created', 'success');
                }
            } catch (err) {
                log(`Error: ${err.message}`, 'error');
            }
        }
        
        async function runBatchConvert() {
            log('Starting: Batch Convert Folder...', 'info');
            try {
                const result = await window.electronAPI.runPythonScript('batch_convert_to_gdocs.py');
                if (result.success) {
                    log('‚úì Batch conversion complete', 'success');
                }
            } catch (err) {
                log(`Error: ${err.message}`, 'error');
            }
        }
        
        // ============================================
        // EXTERNAL LINKS
        // ============================================
        function openClaude() {
            window.electronAPI.openExternal('https://claude.ai');
        }
        
        function openDrive() {
            window.electronAPI.openExternal('https://drive.google.com');
        }
        
        // ============================================
        // INIT
        // ============================================
        document.getElementById('platform').textContent = `Platform: ${window.electronAPI.platform}`;
        document.getElementById('version').textContent = `v${window.electronAPI.version}`;
    </script>
</body>
</html>
